<html>
<head>
<title>Security Tools</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<style type="text/css">
<!--
BODY {
        font-family:  Verdana, Arial, Helvetica, sans-serif
}
-->
</style>
</head>
<body>
<h1><center>Security  Tools</center></h1>
<p>

This project contains the security tools required for developing BD-J
Applications.
  
Here is the list of tools we currently have available:
<p>

<ul>
<li><b>BDCertGenerator</b> - generates the root and application
certificates according to BD-J Specification.
<p>
<li> <b>BDSigner</b> -- signs the jars using keys generated by the BDCertGenerator.
<p>
<li> <b>BDCredentialSigner</b> --Generates the file credentials and signs the jar file.
For more information in this tool please refer to the CREDENTIALS-README.TXT
</ul>

<p>

<h2> Certificate Generation and Signing </h2>

There are two steps involved in signing a BD-J application.

Step 1: Generate the ceritficate/s and key for signing
Step 2: Signing the jar using the key generate above

<p>

<h3>Step 1: Certificate Creation:</h3>

BDCertGenerator tool is used for generating the certificates for
the BD-J Platform. This tool generates three types of certificates
for singing the application jar and the Binding Unit Manifest File (BUMF).
<p>
The <b>mandatory</b> argument for this tool is the type of the certificate.
It could be either:
<p>

 	"root" or "app" or "binding"
<p>
The organization ID is required based on the type of certificate.
For example,

If the certificate type is "root", the orgID is not mandated.
<p>
If the type is "app", the orgID is typically required, unless it's a
non-leaf certificate. The tool does not mandate the orgID but warns 
the user about adding an orgID in the certificate.
<p>
And finally, if certificate type is "binding" an orgID corresponding
to the one used in the bumf.xml (or whatever BUMF file name is) must be used.
<p>
For other options type: BDCertGenerator -help.

<h4>Example:</h4>

Lets say:
<br>
<b>SEC_HOME</b> represents the directory where hdcookbook security
jar resides.
<p>
<b>BC_HOME</b> represents the directory where the Bouncy Castle Provider
jar resides. 
We are using: bdprov-jdk15-137.jar, a bouncycastle distribution.
A copy of which can be found in the "resources" directory.
We use release 137 built for JDK 5.0.
For more informatoin see: http://www.bouncycastle.org/

<ul>
<li> Here is the command line usage for generating a root certificate.
<p>
% java -cp $SEC_HOME/security.jar:$BC_HOME/bcprov-jdk15-137.jar \ <br>
net.java.bd.tools.security.BDCertGenerator -root 7fff0001 

<li> Here is the command line usage for generating an application certificate.
<p>
% java -cp $SEC_HOME/security.jar:$BC_HOME/bcprov-jdk15-137.jar \ <br>
net.java.bd.tools.security.BDCertGenerator -app 7fff0001 

<li> Place the generated certificate file: app.discroot.crt,
in the BDMV/CERTIFICATE directory and BDMV/CERTIFCATE/BACKUP directory.
</ul>


<h3>Step 2: Signing the application jar</h3>

BDSigner is the tool that is used for signing the jar. This tool is
also used for signing BUMF and it can be used to generate "online.sig" file
provided the private key is imported into the keystore.
<p>
The mandatory argument for this tool is one or more jarfiles.
For other options type: BDSigner -help.
<p>
The key that the BDSigner expects to sign the jars is generated in Step 1.
<p>
<ul>
<li> Here is the command line usage for signing the jar.
<p>
java -cp $SEC_HOME/security.jar:$BC_HOME/bcprov-jdk15-137.jar \<br>
net.java.bd.tools.security.BDSigner 00000.jar 
</ul>
<br>
BDsigner is built on top of JDK's jarsigner which is bundled in tools.jar 
 
<p>

<h4> Why can't we just use the standard "jarsigner" tool in Java SE?</h4>

Blu-Ray specification requires an extra header in the signature 
manifest file in signed jar files.  The signature manifest file 
must have an attribute called "BDJ-Signature-Version" with the 
value of "1.0". Please refer to the section "12.1.4.2" of the
"System Description Blu-Ray Disc Read-Only Format - Part 3
Audio Visual Basic Specifications" - DRAFT Version 2.02".

The "jarsigner" tool in Java SE generates signature manifest 
file automatically. There is no way to specify extensions to 
the signature manifest file. So, it can not be used to sign
jars for BD-J. 
<hr>
